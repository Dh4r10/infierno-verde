---
import '../styles/global.css';
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Infierno Verde - 2025</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
  </head>
  <body>
    <slot />
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    height: 100%;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const durations = {
      '#nosotros': 300,
      '#categorias': 450,
      '#calendario': 500,
      '#ubicacion': 550,
    };

    function easeOutCubic(t) {
      return 1 - Math.pow(1 - t, 3);
    }

    function scrollToElement(target, duration) {
      const start = window.scrollY;
      const end = target.getBoundingClientRect().top + start;
      const distance = end - start;
      let startTime = null;

      function step(currentTime) {
        if (!startTime) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const progress = Math.min(timeElapsed / duration, 1);
        const ease = easeOutCubic(progress);
        window.scrollTo(0, start + distance * ease);

        if (timeElapsed < duration) {
          requestAnimationFrame(step);
        }
      }

      requestAnimationFrame(step);
    }

    const links = document.querySelectorAll('a[href^="#"]');

    links.forEach((link) => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const href = this.getAttribute('href');
        const target = document.querySelector(href);
        const duration = durations[href] || 500; // default to 500ms if not specified
        if (target) {
          scrollToElement(target, duration);
        }
      });
    });
  });
</script>
